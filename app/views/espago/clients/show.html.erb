<div class="container mt-4">
  <div class="d-flex flex-column flex-md-row justify-content-between align-items-center mb-3">
    <h3><%= @client.client_number %></h3>
    <%= link_to "Back to Payment Methods", account_path(anchor: 'clients'), class: "btn btn-primary" %>
  </div>
  <div class="row mt-4">
    <div class="col-lg-12 mb-4">
      <div class="card shadow-sm border-light">
        <div class="card-body">
          <h5 class="card-title mb-3">Espago Client Details</h5>
          <div class="row">
            <div class="col-md-6">
              <p class="d-flex justify-content-between">
                <strong>Name:</strong>
                <span><%= [@client.first_name, @client.last_name].compact.join(" ").presence || "N/A" %></span>
              </p>
              <p class="d-flex justify-content-between">
                <strong>Company:</strong>
                <span><%= @client.company.presence || "N/A" %></span>
              </p>
              <p class="d-flex justify-content-between">
                <strong>Card Last 4:</strong>
                <span><%= @client.last4.presence || "N/A" %></span>
              </p>
            </div>
            <div class="col-md-6">
              <p class="d-flex justify-content-between">
                <strong>Status:</strong>
                <span>
                  <span class="badge <%= client_status_badge_class(@client.status) %>">
                    <%= client_status_label(@client.status) %>
                  </span>
                  <% if @client.status == 'MIT' %>
                    <span class="badge bg-success text-dark">Auto-Renew</span>
                  <% else %>
                    <span class="badge bg-danger">Auto-Renew</span>
                  <% end %>
                </span>
              </p>
              <p class="d-flex justify-content-between">
                <strong>Created At:</strong>
                <span><%= @client.created_at.strftime("%B %d, %Y") %></span>
              </p>
            </div>
          </div>
        </div>
        <div class="card-footer bg-light">
          <% case @client.status %>
          <% when 'unverified' %>
            <div class="alert alert-danger mb-0" role="alert">
              This Payment Method is currently inactive due to failed payment. You need to make a new payment with this card.
            </div>
          <% when 'CIT' %>
            <div class="alert alert-warning mb-0" role="alert">
              This card is active and can be used for manual payments, but due to your card settings or bank requirements, this card is not eligible for Auto-Renew payments.
            </div>
          <% when 'MIT' %>
            <div class="alert alert-success mb-0" role="alert">
              This card is fully active and eligible for all types of payments, including Auto-Renew subscriptions.
            </div>
          <% else %>
            <div class="alert alert-secondary mb-0" role="alert">
              This card has an unknown status. Please reach out to support for assistance.
            </div>
          <% end %>
        </div>
      </div>
    </div>
  </div>
  <%= render partial: 'espago/payments/payment', locals: { payments: @payments } %>
</div>
